{"version":3,"file":"commonHelpers.js","sources":["../src/js/menu.js"],"sourcesContent":["let currentState = 0;\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  // Обработчик кликов для открытия меню\n  const burgerMenuButton = document.querySelector('.menu-area');\n  const menuCurtain = document.getElementById('menu-curtain');\n  const body = document.body;\n  const menuContainer = document.getElementById('menu-container');\n  const menuContentOverlay = document.getElementById('menu-content-overlay');\n  const menuRounder = document.getElementById('menu-rounder');\n  const menuCascade = document.getElementById('menu-cascade');\n\n  burgerMenuButton.addEventListener('click', () => {\n    menuCurtain.classList.add('menu-curtain--opened', 'menu-curtain--animate');\n    menuContainer.style.display = 'block';\n    body.classList.add('menu--no-scroll');\n    menuContentOverlay.classList.toggle('active');\n\n    // Обработчики кликов по элементам меню\n    document.querySelectorAll('.menu-item').forEach(item => {\n      item.removeEventListener('click', handleMenuItemClick);\n      item.removeEventListener('click', logMenuInteraction);\n      item.addEventListener('click', () => {\n        handleMenuItemClick(item);\n        logMenuInteraction(item);\n      });\n    });\n\n    if (menuRounder) {\n      menuRounder.classList.add('menu-rounder--opened-all');\n    }\n  });\n\n  // Функция закрытия меню\n  const closeMenu = () => {\n    menuContentOverlay.classList.remove('active');\n    menuCurtain.classList.remove(\n      'menu-curtain--opened',\n      'menu-curtain--animate'\n    );\n    body.classList.remove('menu--no-scroll');\n    menuContainer.style.display = 'none';\n    if (menuRounder) {\n      menuRounder.classList.remove('menu-rounder--opened-all');\n    }\n    closeAllMenuLevels(); // Закрытие всех уровней меню при закрытии меню\n  };\n\n  // Закрытие меню при клике вне его\n  document.addEventListener('click', event => {\n    if (\n      !menuContainer.contains(event.target) &&\n      !burgerMenuButton.contains(event.target)\n    ) {\n      closeMenu();\n    }\n  });\n\n  // Закрытие меню при клике на ссылки\n  document.querySelectorAll('a').forEach(item => {\n    item.addEventListener('click', closeMenu);\n  });\n\n  // Обработчики для стрелок и кнопок \"назад\"\n  const menuItemArrows = document.querySelectorAll('.menu-item-arrow');\n  const menuItemArrowsBack = document.querySelectorAll('.menu-btn-back__icon');\n\n  // Переход на следующий уровень меню\n  const toggleTransform = () => {\n    currentState = (currentState + 1) % 4;\n    updateTransform();\n    updateParentClass();\n  };\n\n  // Возврат на предыдущий уровень меню\n  const toggleTransformBack = () => {\n    currentState = (currentState - 1 + 4) % 4;\n    updateTransform();\n    updateParentClass();\n  };\n\n  menuItemArrows.forEach(arrow => {\n    arrow.removeEventListener('click', toggleTransform);\n    arrow.addEventListener('click', toggleTransform);\n  });\n\n  menuItemArrowsBack.forEach(backArrow => {\n    backArrow.removeEventListener('click', toggleTransformBack);\n    backArrow.addEventListener('click', toggleTransformBack);\n  });\n});\n\n// Обновляем состояние меню\nconst updateTransform = () => {\n  const menuRounder = document.querySelector('.menu-rounder');\n\n  const transformValues = [0, -272, -544]; // Убедитесь, что этот массив соответствует вашим нуждам\n  if (menuRounder) {\n    menuRounder.style.transform = `translateX(${transformValues[currentState]}px)`;\n  }\n};\n\n// Функция для обновления класса для элемента <ul> с классами \"menu-root menu-level menu-level-0\"\nconst updateParentClass = () => {\n  const menuCascade = document.getElementById('menu-cascade');\n  const targetElement = menuCascade.querySelector(\n    'ul.menu-root.menu-level.menu-level-0'\n  );\n\n  if (targetElement) {\n    if (currentState === 0) {\n      targetElement.classList.add('first-layer');\n    } else {\n      targetElement.classList.remove('first-layer');\n    }\n  }\n};\n\n// Переход на следующий уровень меню\nconst toggleTransform = () => {\n  currentState = (currentState + 1) % 4;\n  updateTransform();\n  updateParentClass();\n};\n\n// Возврат на предыдущий уровень меню\nconst toggleTransformBack = () => {\n  currentState = (currentState - 1 + 4) % 4;\n  updateTransform();\n  updateParentClass();\n};\n\n// Функция для обработки клика по элементу меню\nconst handleMenuItemClick = e => {\n  if (e.classList.contains('is-father')) {\n    document.querySelectorAll('.menu-root').forEach(menuRoot => {\n      console.log(`Adding class to element: ${menuRoot}`); //\n      menuRoot.classList.add('menu-level--opened');\n    });\n\n    // Если есть элемент с классом \"menu-level\", открываем его\n    const menuLevel = e.querySelector('.menu-level');\n    if (menuLevel) {\n      menuLevel.classList.add('menu-level--opened');\n      const parentUl = e.parentNode;\n      if (parentUl.nodeName === 'UL') {\n        parentUl.classList.remove('first-layer');\n      }\n    }\n  }\n};\n\n// Функция для удаления класса у всех элементов меню\nconst closeAllMenuLevels = () => {\n  console.log('Closing all menu levels...'); // Для отладки\n  document.querySelectorAll('.menu-root').forEach(menuRoot => {\n    menuRoot.classList.remove('menu-level--opened');\n  });\n  document.querySelectorAll('.menu-level').forEach(menuLevel => {\n    menuLevel.classList.remove('menu-level--opened');\n  });\n};\n\n// Функция для логирования взаимодействия с меню\nconst logMenuInteraction = e => {\n  const classList = e.classList;\n  if (classList.contains('menu-btn-back')) {\n    const backLabel = e.querySelector('.menu-btn-back__label');\n    const parentItem = e.parentElement.querySelector(\n      '.regua-navegacao-menu-item'\n    );\n    if (backLabel && parentItem) {\n      console.log(\n        `back | ${parentItem.textContent} > ${backLabel.textContent}`\n      );\n    }\n  } else if (classList.contains('is-father')) {\n    console.log(`navegacao | ${getBreadcrumb(e)}`);\n  } else {\n    const itemTitle = e.querySelector('.menu-item-title').textContent;\n    const parentBreadcrumb = getBreadcrumb(e.parentElement.parentElement);\n    console.log(\n      `links clicaveis | ${\n        parentBreadcrumb ? `${parentBreadcrumb} > ${itemTitle}` : itemTitle\n      }`\n    );\n  }\n};\n\n// Функция для получения хлебных крошек\nconst getBreadcrumb = e => {\n  const breadcrumbs = [e.querySelector('.menu-item-title').textContent];\n  let currentElement = e;\n  while (currentElement && currentElement.id !== 'menu-cascade') {\n    if (currentElement.classList.contains('is-father')) {\n      const backLabel = currentElement.querySelector('.menu-btn-back__label');\n      if (backLabel) {\n        breadcrumbs.push(backLabel.textContent);\n      }\n    }\n    currentElement = currentElement.parentNode;\n  }\n  return breadcrumbs.reverse().join(' > ');\n};\n\n// Обработчики для стрелок и кнопок \"назад\"\ndocument.querySelectorAll('.is-father').forEach(arrow => {\n  arrow.removeEventListener('click', toggleTransform);\n  console.log(currentState);\n  arrow.addEventListener('click', toggleTransform);\n});\n\ndocument.querySelectorAll('.menu-btn-back__icon').forEach(backArrow => {\n  backArrow.removeEventListener('click', toggleTransformBack);\n  backArrow.addEventListener('click', toggleTransformBack);\n});\n"],"names":["currentState","burgerMenuButton","menuCurtain","body","menuContainer","menuContentOverlay","menuRounder","item","handleMenuItemClick","logMenuInteraction","closeMenu","closeAllMenuLevels","event","menuItemArrows","menuItemArrowsBack","toggleTransform","updateTransform","updateParentClass","toggleTransformBack","arrow","backArrow","transformValues","targetElement","menuRoot","menuLevel","parentUl","classList","backLabel","parentItem","getBreadcrumb","itemTitle","parentBreadcrumb","breadcrumbs","currentElement"],"mappings":"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"}