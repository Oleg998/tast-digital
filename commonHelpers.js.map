{"version":3,"file":"commonHelpers.js","sources":["../src/js/menu.js"],"sourcesContent":["const burgerMenuButton = document.querySelector('.menu-area');\nconst menuCurtain = document.getElementById('menu-curtain');\nconst body = document.body;\nconst menuContainer = document.getElementById('menu-container');\nconst menuContentOverlay = document.getElementById('menu-content-overlay');\nconst menuRounder = document.getElementById('menu-rounder');\nconst menuCascade = document.getElementById('menu-cascade');\nlet currentState = 0;\n\n// Функция для обновления трансформации\nconst updateTransform = () => {\n    const transformValues = [0, -272, -544 ];\n    if (menuRounder) {\n        menuRounder.style.transform = `translateX(${transformValues[currentState]}px)`;\n    }\n};\n\n// Функция для обновления класса для родительских элементов\nconst updateParentClass = () => {\n    if (menuRounder && menuCascade) {\n        let parentElement = menuRounder.parentElement;\n\n        while (parentElement && parentElement !== menuCascade) {\n            parentElement = parentElement.parentElement;\n        }\n\n        if (parentElement === menuCascade) {\n            if (currentState === 0) {\n                parentElement.classList.add('first-layer');\n            } else {\n                parentElement.classList.remove('first-layer');\n            }\n        }\n    }\n};\n\n// Переход на следующий уровень меню\nconst toggleTransform = () => {\n    currentState = (currentState + 1) % 4;\n    updateTransform();\n    updateParentClass();\n};\n\n// Возврат на предыдущий уровень меню\nconst toggleTransformBack = () => {\n    currentState = (currentState - 1 + 4) % 4;\n    updateTransform();\n    updateParentClass();\n};\n\n// Функция для обработки клика по элементу меню\nconst handleMenuItemClick = (e) => {\n    if (e.classList.contains(\"is-father\")) {\n        console.log('Handling menu item click...'); // Для отладки\n        console.log('Adding class to .menu-root elements...'); // Для отладки\n        \n        // Добавляем класс \"menu-level--opened\" ко всем элементам с классом \"menu-root\"\n        document.querySelectorAll('.menu-root').forEach(menuRoot => {\n            console.log(`Adding class to element: ${menuRoot}`); // Для отладки\n            menuRoot.classList.add(\"menu-level--opened\");\n        });\n\n        // Если есть элемент с классом \"menu-level\", открываем его\n        const menuLevel = e.querySelector(\".menu-level\");\n        if (menuLevel) {\n            menuLevel.classList.add(\"menu-level--opened\");\n            const parentUl = e.parentNode;\n            if (parentUl.nodeName === \"UL\") {\n                parentUl.classList.remove(\"first-layer\");\n            }\n        }\n    }\n};\n\n// Функция для удаления класса у всех элементов меню\nconst closeAllMenuLevels = () => {\n    console.log('Closing all menu levels...'); // Для отладки\n    document.querySelectorAll('.menu-root').forEach(menuRoot => {\n        menuRoot.classList.remove(\"menu-level--opened\");\n    });\n    document.querySelectorAll('.menu-level').forEach(menuLevel => {\n        menuLevel.classList.remove(\"menu-level--opened\");\n    });\n};\n\n// Функция для логирования взаимодействия с меню\nconst logMenuInteraction = (e) => {\n    const classList = e.classList;\n    if (classList.contains(\"menu-btn-back\")) {\n        const backLabel = e.querySelector(\".menu-btn-back__label\");\n        const parentItem = e.parentElement.querySelector(\".regua-navegacao-menu-item\");\n        if (backLabel && parentItem) {\n            console.log(`back | ${parentItem.textContent} > ${backLabel.textContent}`);\n        }\n    } else if (classList.contains(\"is-father\")) {\n        console.log(`navegacao | ${getBreadcrumb(e)}`);\n    } else {\n        const itemTitle = e.querySelector(\".menu-item-title\").textContent;\n        const parentBreadcrumb = getBreadcrumb(e.parentElement.parentElement);\n        console.log(`links clicaveis | ${parentBreadcrumb ? `${parentBreadcrumb} > ${itemTitle}` : itemTitle}`);\n    }\n};\n\n// Функция для получения хлебных крошек\nconst getBreadcrumb = (e) => {\n    const breadcrumbs = [e.querySelector(\".menu-item-title\").textContent];\n    let currentElement = e;\n    while (currentElement && currentElement.id !== \"menu-cascade\") {\n        if (currentElement.classList.contains(\"is-father\")) {\n            const backLabel = currentElement.querySelector(\".menu-btn-back__label\");\n            if (backLabel) {\n                breadcrumbs.push(backLabel.textContent);\n            }\n        }\n        currentElement = currentElement.parentNode;\n    }\n    return breadcrumbs.reverse().join(\" > \");\n};\n\n// Открытие меню\nburgerMenuButton.addEventListener('click', () => {\n    menuCurtain.classList.add('menu-curtain--opened', 'menu-curtain--animate');\n    menuContainer.style.display = 'block';\n    body.classList.add('menu--no-scroll');\n    menuContentOverlay.classList.toggle(\"active\");\n\n    // Обработчики кликов по элементам меню\n    document.querySelectorAll('.menu-item').forEach(item => {\n        item.removeEventListener('click', handleMenuItemClick);\n        item.removeEventListener('click', logMenuInteraction);\n        item.addEventListener('click', () => {\n            handleMenuItemClick(item);\n            logMenuInteraction(item);\n        });\n    });\n\n    if (menuRounder) {\n        menuRounder.classList.add('menu-rounder--opened-all');\n    }\n});\n\n// Закрытие меню\nconst closeMenu = () => {\n    menuContentOverlay.classList.remove(\"active\");\n    menuCurtain.classList.remove('menu-curtain--opened', 'menu-curtain--animate');\n    body.classList.remove('menu--no-scroll');\n    menuContainer.style.display = 'none';\n    if (menuRounder) {\n        menuRounder.classList.remove('menu-rounder--opened-all');\n    }\n    closeAllMenuLevels(); // Закрыть все уровни меню при закрытии меню\n};\n\n// Закрытие меню при клике вне него\ndocument.addEventListener('click', (event) => {\n    if (!menuContainer.contains(event.target) && !burgerMenuButton.contains(event.target)) {\n        closeMenu();\n    }\n});\n\n// Закрытие меню при клике на ссылки\ndocument.querySelectorAll('a').forEach(item => {\n    item.addEventListener('click', closeMenu);\n});\n\n// Обработчики для стрелок и кнопок \"назад\"\ndocument.querySelectorAll('.is-father').forEach(arrow => {\n    arrow.removeEventListener('click', toggleTransform);\n    arrow.addEventListener('click', toggleTransform);\n});\n\ndocument.querySelectorAll('.menu-btn-back__icon').forEach(backArrow => {\n    backArrow.removeEventListener('click', toggleTransformBack);\n    backArrow.addEventListener('click', toggleTransformBack);\n});\n"],"names":["burgerMenuButton","menuCurtain","body","menuContainer","menuContentOverlay","menuRounder","menuCascade","currentState","updateTransform","transformValues","updateParentClass","parentElement","toggleTransform","toggleTransformBack","handleMenuItemClick","menuRoot","menuLevel","parentUl","closeAllMenuLevels","logMenuInteraction","classList","backLabel","parentItem","getBreadcrumb","itemTitle","parentBreadcrumb","breadcrumbs","currentElement","item","closeMenu","event","arrow","backArrow"],"mappings":"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"}