{"version":3,"file":"commonHelpers.js","sources":["../src/js/menu.js"],"sourcesContent":["\nlet currentState = 0;\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    // Обработчик кликов для открытия меню\n    const burgerMenuButton = document.querySelector('.menu-area');\n    const menuCurtain = document.getElementById('menu-curtain');\n    const body = document.body;\n    const menuContainer = document.getElementById('menu-container');\n    const menuContentOverlay = document.getElementById('menu-content-overlay');\n    const menuRounder = document.getElementById('menu-rounder');\n    const menuCascade = document.getElementById('menu-cascade');\n\n    burgerMenuButton.addEventListener('click', () => {\n        menuCurtain.classList.add('menu-curtain--opened', 'menu-curtain--animate');\n        menuContainer.style.display = 'block';\n        body.classList.add('menu--no-scroll');\n        menuContentOverlay.classList.toggle(\"active\");\n\n        // Обработчики кликов по элементам меню\n        document.querySelectorAll('.menu-item').forEach(item => {\n            item.removeEventListener('click', handleMenuItemClick);\n            item.removeEventListener('click', logMenuInteraction);\n            item.addEventListener('click', () => {\n                handleMenuItemClick(item);\n                logMenuInteraction(item);\n            });\n        });\n\n        if (menuRounder) {\n            menuRounder.classList.add('menu-rounder--opened-all');\n        }\n    });\n\n    // Функция закрытия меню\n    const closeMenu = () => {\n        menuContentOverlay.classList.remove(\"active\");\n        menuCurtain.classList.remove('menu-curtain--opened', 'menu-curtain--animate');\n        body.classList.remove('menu--no-scroll');\n        menuContainer.style.display = 'none';\n        if (menuRounder) {\n            menuRounder.classList.remove('menu-rounder--opened-all');\n        }\n        closeAllMenuLevels(); // Закрытие всех уровней меню при закрытии меню\n    };\n\n    // Закрытие меню при клике вне его\n    document.addEventListener('click', (event) => {\n        if (!menuContainer.contains(event.target) && !burgerMenuButton.contains(event.target)) {\n            closeMenu();\n        }\n    });\n\n    // Закрытие меню при клике на ссылки\n    document.querySelectorAll('a').forEach(item => {\n        item.addEventListener('click', closeMenu);\n    });\n\n    // Обработчики для стрелок и кнопок \"назад\"\n    const menuItemArrows = document.querySelectorAll('.is-father');\n    const menuItemArrowsBack = document.querySelectorAll('.menu-btn-back__icon');\n\n    // Обновляем состояние меню\n    const updateTransform = () => {\n        const transformValues = [0, -272, -544, -816];\n        if (menuRounder) {\n            menuRounder.style.transform = `translateX(${transformValues[currentState]}px)`;\n        }\n    };\n\n    // Переход на следующий уровень меню\n    const toggleTransform = () => {\n        currentState = (currentState + 1) % 4;\n        updateTransform();\n        updateParentClass();\n    };\n\n    // Возврат на предыдущий уровень меню\n    const toggleTransformBack = () => {\n        currentState = (currentState - 1 + 4) % 4;\n        updateTransform();\n        updateParentClass();\n    };\n\n    menuItemArrows.forEach(arrow => {\n        arrow.removeEventListener('click', toggleTransform);\n        arrow.addEventListener('click', toggleTransform);\n    });\n\n    menuItemArrowsBack.forEach(backArrow => {\n        backArrow.removeEventListener('click', toggleTransformBack);\n        backArrow.addEventListener('click', toggleTransformBack);\n    });\n});\n\n\n// Функция для обновления трансформации\nconst updateTransform = () => {\n    const transformValues = [0, -272, -544 ];\n    if (menuRounder) {\n        menuRounder.style.transform = `translateX(${transformValues[currentState]}px)`;\n    }\n};\n\n// Функция для обновления класса для родительских элементов\nconst updateParentClass = () => {\n    if (menuRounder && menuCascade) {\n        let parentElement = menuRounder.parentElement;\n\n        while (parentElement && parentElement !== menuCascade) {\n            parentElement = parentElement.parentElement;\n        }\n\n        if (parentElement === menuCascade) {\n            if (currentState === 0) {\n                parentElement.classList.add('first-layer');\n            } else {\n                parentElement.classList.remove('first-layer');\n            }\n        }\n    }\n};\n\n// Переход на следующий уровень меню\nconst toggleTransform = () => {\n    currentState = (currentState + 1) % 4;\n    updateTransform();\n    updateParentClass();\n};\n\n// Возврат на предыдущий уровень меню\nconst toggleTransformBack = () => {\n    currentState = (currentState - 1 + 4) % 4;\n    updateTransform();\n    updateParentClass();\n};\n\n// Функция для обработки клика по элементу меню\nconst handleMenuItemClick = (e) => {\n    if (e.classList.contains(\"is-father\")) {\n        console.log('Handling menu item click...'); // Для отладки\n        console.log('Adding class to .menu-root elements...'); // Для отладки\n        \n        // Добавляем класс \"menu-level--opened\" ко всем элементам с классом \"menu-root\"\n        document.querySelectorAll('.menu-root').forEach(menuRoot => {\n            console.log(`Adding class to element: ${menuRoot}`); // Для отладки\n            menuRoot.classList.add(\"menu-level--opened\");\n        });\n\n        // Если есть элемент с классом \"menu-level\", открываем его\n        const menuLevel = e.querySelector(\".menu-level\");\n        if (menuLevel) {\n            menuLevel.classList.add(\"menu-level--opened\");\n            const parentUl = e.parentNode;\n            if (parentUl.nodeName === \"UL\") {\n                parentUl.classList.remove(\"first-layer\");\n            }\n        }\n    }\n};\n\n// Функция для удаления класса у всех элементов меню\nconst closeAllMenuLevels = () => {\n    console.log('Closing all menu levels...'); // Для отладки\n    document.querySelectorAll('.menu-root').forEach(menuRoot => {\n        menuRoot.classList.remove(\"menu-level--opened\");\n    });\n    document.querySelectorAll('.menu-level').forEach(menuLevel => {\n        menuLevel.classList.remove(\"menu-level--opened\");\n    });\n};\n\n// Функция для логирования взаимодействия с меню\nconst logMenuInteraction = (e) => {\n    const classList = e.classList;\n    if (classList.contains(\"menu-btn-back\")) {\n        const backLabel = e.querySelector(\".menu-btn-back__label\");\n        const parentItem = e.parentElement.querySelector(\".regua-navegacao-menu-item\");\n        if (backLabel && parentItem) {\n            console.log(`back | ${parentItem.textContent} > ${backLabel.textContent}`);\n        }\n    } else if (classList.contains(\"is-father\")) {\n        console.log(`navegacao | ${getBreadcrumb(e)}`);\n    } else {\n        const itemTitle = e.querySelector(\".menu-item-title\").textContent;\n        const parentBreadcrumb = getBreadcrumb(e.parentElement.parentElement);\n        console.log(`links clicaveis | ${parentBreadcrumb ? `${parentBreadcrumb} > ${itemTitle}` : itemTitle}`);\n    }\n};\n\n// Функция для получения хлебных крошек\nconst getBreadcrumb = (e) => {\n    const breadcrumbs = [e.querySelector(\".menu-item-title\").textContent];\n    let currentElement = e;\n    while (currentElement && currentElement.id !== \"menu-cascade\") {\n        if (currentElement.classList.contains(\"is-father\")) {\n            const backLabel = currentElement.querySelector(\".menu-btn-back__label\");\n            if (backLabel) {\n                breadcrumbs.push(backLabel.textContent);\n            }\n        }\n        currentElement = currentElement.parentNode;\n    }\n    return breadcrumbs.reverse().join(\" > \");\n};\n\n\n\n// Обработчики для стрелок и кнопок \"назад\"\ndocument.querySelectorAll('.is-father').forEach(arrow => {\n    arrow.removeEventListener('click', toggleTransform);\n    arrow.addEventListener('click', toggleTransform);\n});\n\ndocument.querySelectorAll('.menu-btn-back__icon').forEach(backArrow => {\n    backArrow.removeEventListener('click', toggleTransformBack);\n    backArrow.addEventListener('click', toggleTransformBack);\n});\n"],"names":["currentState","burgerMenuButton","menuCurtain","body","menuContainer","menuContentOverlay","menuRounder","item","handleMenuItemClick","logMenuInteraction","closeMenu","closeAllMenuLevels","event","menuItemArrows","menuItemArrowsBack","updateTransform","transformValues","toggleTransform","updateParentClass","toggleTransformBack","arrow","backArrow","parentElement","menuRoot","menuLevel","parentUl","classList","backLabel","parentItem","getBreadcrumb","itemTitle","parentBreadcrumb","breadcrumbs","currentElement"],"mappings":"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"}